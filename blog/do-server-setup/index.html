<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>DigitalOcean VPS Setup</title>
    
    <meta name="description" content="Personal brain-dump of Alex "Ingshtrom" Hokanson.">
    
    <meta name="author" content="Alex Hokanson">
    <link rel="author" href="https://plus.google.com/+AlexHokanson">
    <link href="http://www.mysticgear.com/blog/do-server-setup/" rel="canonical">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="alternate" type="application/rss+xml" title="Alex Hokanson" href="http://www.mysticgear.com/feed.xml">
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/assets/application-232535324dba18afe990fe141cf64867.css">
  </head>

  <body>
  <header class="site-header" role="banner">
      <div class="container">
        <a href="/" class="logo"><i class="icon-cog"></i><span>Mystic Gear</span></a>

        <nav role="navigiation">
          <ul class="site-nav">
            <li><a href="/about/">About</a>
            <!-- <li><a href="/blog/">Blog</a> -->
          </ul>
        </nav>
      </div>
    </header>

    

    <div class="site-content">
      <div class="container">
        <h1 class="post-title">DigitalOcean VPS Setup</h1>
<p class="post-meta">04 May 2014</p>

<div class="post">
<p>This is a short guide to setting up a VPS using <a href="http://releases.ubuntu.com/12.04/">Ubuntu 12.04.4 LTS</a>. Most of this is for archiving my personal server setup checklist, but maybe it will help you too. </p>

<p>I prefer to use <a href="https://digitalocean.com/">DigitalOcean</a> for my hosting.  They are affordable and reliable; what more can you ask from a hosting platform? </p>

<p>I am assuming that you have already setup a droplet and have ssh access to your VPS. You also have a user other than root to perform all other steps. You should never run normal day-to-day operations with root, although I do run with a user that has sudo privileges.</p>

<p>Many (if not all) of these have guides originating from DigitalOcean at their <a href="https://www.digitalocean.com/community/articles">support site</a>.</p>

<h3>Postfix</h3>

<p><a href="https://www.digitalocean.com/community/articles/how-to-install-and-setup-postfix-on-ubuntu-14-04">Postfix installation</a> is pretty painless. There is no special configuration.</p>

<h3>IPTables</h3>

<p>This seems to be the &quot;default&quot; Ubuntu firewall. I followed the <a href="https://www.digitalocean.com/community/articles/how-to-set-up-a-firewall-using-ip-tables-on-ubuntu-12-04">guide from DigitalOcean</a>. IPTables should already be installed by default. Here is what I did:</p>

<div class="highlight"><pre><code class="bash"><span class="c"># keep all current connections open</span>
&gt; sudo iptables -A INPUT -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT
<span class="c"># allow loopback functionality</span>
&gt; sudo iptables -A INPUT -i lo -j ACCEPT
<span class="c"># allow ssh connections</span>
&gt; sudo iptables -A INPUT -p tcp --dport ssh -j ACCEPT
<span class="c"># allow http connections</span>
&gt; sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT
<span class="c"># allow smtp connections</span>
&gt; sudo iptables -A INPUT -p tcp --dport 25 -j ACCEPT
<span class="c"># all connections after this are denied</span>
&gt; sudo iptables -A INPUT -j DROP
<span class="c"># list the entries we just put in </span>
&gt; sudo iptables -L
</code></pre></div>

<p>To keep these settings after reboot, use iptables-persistent</p>

<div class="highlight"><pre><code class="bash">&gt; sudo apt-get install iptables-persistent
<span class="c"># say yes to any prompts</span>
&gt; sudo service iptables-persistent start
</code></pre></div>

<h3>TripWire</h3>

<p><a href="https://www.digitalocean.com/community/articles/how-to-use-tripwire-to-detect-server-intrusions-on-an-ubuntu-vps">This guide</a> does a great job of explaining everything to do. It is a bit more complex, so I will not summarize it here. </p>

<h3>ThinkUp</h3>

<p>I will have a full guide for this soon! In the meantime you can signup for <a href="https://www.thinkup.com/">ThinkUp</a>!</p>

</div>

<div class="post-comments">
  Got any questions or comments? Drop me a message on <a href="http://twitter.com/ingshtrom" rel="nofollow">Twitter (@Ingshtrom)</a>.
</div>

      </div>
    </div>

    <footer class="site-footer">
      <div class="container">
        &copy; Alex Hokanson 2014.
      </div>
    </footer>
  </body>
</html>
