<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>FStF: GitHub Pages with Jekyll and Plugins</title>
    
    <meta name="description" content="Personal brain-dump of Alex "Ingshtrom" Hokanson.">
    
    <meta name="author" content="Alex Hokanson">
    <link rel="author" href="https://plus.google.com/+AlexHokanson">
    <link href="http://www.mysticgear.com/blog/jekyll-from-start-to-finish/" rel="canonical">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="alternate" type="application/rss+xml" title="Alex Hokanson" href="http://www.mysticgear.com/feed.xml">
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/assets/application-232535324dba18afe990fe141cf64867.css">
  </head>

  <body>
  <header class="site-header" role="banner">
      <div class="container">
        <a href="/" class="logo"><i class="icon-cog"></i><span>Mystic Gear</span></a>

        <nav role="navigiation">
          <ul class="site-nav">
            <li><a href="/about/">About</a>
            <!-- <li><a href="/blog/">Blog</a> -->
          </ul>
        </nav>
      </div>
    </header>

    

    <div class="site-content">
      <div class="container">
        <h1 class="post-title">FStF: GitHub Pages with Jekyll and Plugins</h1>
<p class="post-meta">27 Apr 2014</p>

<div class="post">
<p><strong>From Start to Finish (FStF)</strong>, a series of guides for going from nothing to something with a particular technology. The majority of these guides will be for setting up the software that I use on my custom domain, but I will probably branch out as we go along.</p>

<h3>FStF: GitHub Pages With Jekyll And Plugins</h3>

<p>The site that you are at right now is using <a href="http://jekyllrb.com/">Jekyll</a>. I have found it pretty easy to get started with, but it is definitely more for the &quot;hacker-type&quot; than the general population of users on the Internet. If you are not comfortable with <a href="https://github.com/">Github</a> or <a href="http://git-scm.com/">git</a> you may have difficulty with this guide. In order to maintain the site created from this guide, you will need to know <a href="http://daringfireball.net/projects/markdown/">markdown</a> at the very least, although I recommend knowing basic HTML and CSS.</p>

<h3>What Are The Prerequisites?</h3>

<ul>
<li>Windows machine; That is what I performed these tasks on, so it will make your life easier to do the same.</li>
<li>GitHub account</li>
<li><a href="http://git-scm.com/downloads/guis">git client</a>; I can usually get by with using the <a href="https://windows.github.com/">official GitHub client</a>, but for some parts we will use the git CLI</li>
<li>registered domain name; This will only be necessary if you want your GitHub page to point to a custom domain name.</li>
<li>Some time and patience</li>
</ul>

<h3>Environment Setup</h3>

<p><strong>GitHub</strong>: First, let&#39;s get a repo created on GitHub. Follow GitHub&#39;s <a href="https://pages.github.com/">guide on setting up GitHub pages</a>.</p>

<p><strong>Ruby</strong>: We can&#39;t do much without Ruby installed, so let&#39;s do that now. Follow <a href="http://www.madhur.co.in/blog/2011/09/01/runningjekyllwindows.html">this guide</a> with Ruby v1.9.3 and 32-bit Windows dev-kit.  Stop after you have finished step 4.</p>

<p><strong>Jekyll</strong>: Run run the following from a command prompt</p>

<div class="highlight"><pre><code class="bash">gem install jekyll
</code></pre></div>

<p><strong>Pygments</strong>: You only need to do this section if you want code highlighting in your posts. I assume you probably do. You will need</p>

<ul>
<li><a href="https://www.python.org/ftp/python/2.7.6/python-2.7.6.msi">Python Installer v2.7.3</a></li>
</ul>

<p>Run the installer. Now for Pygments itself, you can use Ruby Gems for that as well. We need a specific version, so run the following in a command prompt</p>

<div class="highlight"><pre><code class="bash">gem install pygments.rb --verbose <span class="s2">&quot;=0.5.0&quot;</span>
</code></pre></div>

<h3>Jekyll Template and Serving</h3>

<p>Find yourself a Jekyll template. You could start from scratch, but since you are already reading this guide I am going to guess you would rather have a good starting point. :)</p>

<p>Look for a template <a href="https://github.com/jekyll/jekyll/wiki/Sites">here</a> or use <a href="https://github.com/ingshtrom/ingshtrom.github.io">mine</a>. You will want to clone locally whichever repo you choose. </p>

<p>For the rest of the guide, it will be easiest if you chose my template since all templates are not created equal and thus will require different setups.</p>

<p>At this point you should have 2 local repos, one for your GitHub Page and another for the template you chose. What you will want to do is manually copy the files from the template repo to your main repo <strong>except</strong> for  the following files/directories:</p>

<ul>
<li>_site/*</li>
<li>.git/*</li>
</ul>

<p>There are a few files that we will need to alter in order to make it work.</p>

<ul>
<li><strong>config.yml</strong>: This file needs to be updated to reflect your name, url, and description.</li>
<li><strong>CNAME</strong>: If you are going to have your GitHub Page forward to a custom domain, then <a href="https://help.github.com/articles/setting-up-a-custom-domain-with-github-pages">follow this guide</a>; otherwise, just delete the file.</li>
<li><strong>README.md</strong>: Update this to reflect that this is your repo, not the repo of whomever&#39;s template you copied.</li>
<li><strong>a lot of of other random files</strong> (optional): mostly just HTML files, but there are other files that reference me or other template creators.  I figure you aren&#39;t creating this site for them.</li>
</ul>

<p>Now we need to make sure we have all of the necessary Ruby Gems in order to build this Jekyll project. Take a look at the <strong>Gemfile</strong> located at the root of your repo. We need to install each of these gems. For my repo, the install command will look something like this</p>

<div class="highlight"><pre><code class="bash">gem install sass bourbon jekyll-assets
</code></pre></div>

<p>We should be able to build our Jekyll site now. Navigate to your GitHub Page repo:</p>

<div class="highlight"><pre><code class="bash"><span class="nb">cd</span> .../workspace/ingshtrom.github.io
jekyll serve
</code></pre></div>

<p>Navigate to http://localhost:4000 and see how it looks!</p>

<h3>Deployment</h3>

<p>It&#39;s fantastic that we have this static website build using Jekyll, but it is pretty useless right now. Let&#39;s deploy our site to GitHub. There are two main obstacles in our way: </p>

<ul>
<li>Jekyll Plugins can&#39;t be run in safe mode, which is how GitHub runs all GitHub pages

<ul>
<li>We will build and publish the static files for GitHub Pages.</li>
</ul></li>
<li>It is a pain to manually push changes to our website to GitHub every time.

<ul>
<li>We will use <a href="http://rake.rubyforge.org/">rake</a> to automate this process</li>
</ul></li>
</ul>

<p>By reading around and looking at other users&#39; repos (mainly <a href="https://github.com/richguk/richguk.github.io">Rich Grundy&#39;s</a>), I have found out how to publish our files in such a way as to keep both the source and built files easily accessible. This way includes keeping two branches active at all times on our repo:</p>

<ul>
<li><strong>master</strong>: The master branch holds the pre-built, static files. GitHub will use these files for your GitHub Page directly. You can think of the master branch as being the root of your web server. These files will be served <strong>as is</strong>. You should <strong>NOT</strong> edit this branch. It should only be updated by rake, which we will talk about soon</li>
<li><strong>source</strong> (not created yet): The source branch holds all...erm, source files. This is what your Jekyll site looks like before being built. Here is where you will write posts, edit styles, and make any other changes to your site.</li>
</ul>

<p>Ok, we know what we want, but it would sure suck to manually set that up every time we want to make a change to our site! Luckily, I have found a guide on how to automate it. Thank you to <a href="https://www.nitrous.io/">Nitrous.io</a> for the <a href="http://blog.nitrous.io/2013/08/30/using-jekyll-plugins-on-github-pages.html">blog post</a>. I recommend reading that post in order to get an idea of what we are doing. We will be changing the rakefile a little bit because our repo is laid out a bit differently. Nitrous.io uses the &quot;gh-pages&quot; way of deploying GitHub Pages for projects, but we want to deploy our site as a user page. </p>

<p>First, lets get our master branch committed and the <strong>source</strong> branch created. Run the following:</p>

<div class="highlight"><pre><code class="bash"><span class="nb">cd</span> .../workspace/ingshtrom.github.io
git commit -m <span class="s2">&quot;initial commit&quot;</span>
git push origin master
git checkout -B <span class="nb">source</span>
git push origin
</code></pre></div>

<p>Now we are ready for the rake bit. In the root of our repo, there is a file named &quot;rakefile&quot;. Rake uses that file as directions on how to build our project. Here is the rakefile from <a href="http://blog.nitrous.io/2013/08/30/using-jekyll-plugins-on-github-pages.html">Nitrous.io</a> with a few modifications to commit/publish to <strong>master</strong> instead of <strong>gh-pages</strong>.</p>

<p><a href="https://github.com/ingshtrom/ingshtrom.github.io/blob/source/rakefile">https://github.com/ingshtrom/ingshtrom.github.io/blob/source/rakefile</a></p>

<p>Before we go running it, we need to commit the rakefile changes:</p>

<div class="highlight"><pre><code class="bash"><span class="nb">cd</span> .../workspace/ingshtrom.github.io
git commit -m <span class="s2">&quot;udpated rakefile because Ingshtrom said so...&quot;</span>
git push origin
</code></pre></div>

<p>Oh! And one more thing, the following line needs to be changed from</p>

<div class="highlight"><pre><code class="bash">system <span class="s2">&quot;git commit -am \&quot;#{message.shellescape}\&quot;&quot;</span>
</code></pre></div>

<p>to</p>

<div class="highlight"><pre><code class="bash">system <span class="s2">&quot;git commit -m \&quot;#{message.shellescape}\&quot;&quot;</span>
</code></pre></div>

<p>(Notice the removal of the &quot;a&quot; flag).</p>

<p>Now just run the following in a Git Bash prompt at the root of your repo</p>

<div class="highlight"><pre><code class="bash">rake
</code></pre></div>

<p>You will be prompted for your GitHub credentials, and the last message you <em>should</em> see is</p>

<div class="highlight"><pre><code class="bash">yolo
</code></pre></div>

<p>To double-check if it worked, go the repo on GitHub. If you switch to the <strong>master</strong> branch, you should <strong>not</strong> see any of the following files/directories:</p>

<ul>
<li>&quot;rakefile&quot;</li>
<li>&quot;_config.yml&quot;</li>
<li>any directories starting with an underscore</li>
</ul>

<p>If you switch to the <strong>source</strong> branch, you will see the files/directories listed above.</p>

<p>Congrats! You should be able to see your GitHub Page site at <strong>username</strong>.github.io. It can take up to 10 minutes to appear. Enjoy!</p>

</div>

<div class="post-comments">
  Got any questions or comments? Drop me a message on <a href="http://twitter.com/ingshtrom" rel="nofollow">Twitter (@Ingshtrom)</a>.
</div>

      </div>
    </div>

    <footer class="site-footer">
      <div class="container">
        &copy; Alex Hokanson 2014.
      </div>
    </footer>
  </body>
</html>
